<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NairobiPixel | Business Systems &amp; Growth for Service Businesses</title>
  <meta name="description" content="NairobiPixel builds customer acquisition and management systems for service businesses: websites, dashboards, automation, and marketing‚Äîworking together as one system." />
  <meta name="keywords" content="NairobiPixel, Abdi Hashi, Digital Marketing Nairobi, Web Design Kenya, Social Media Management Nairobi, Branding Services, SMMA Nairobi, Graphic Design Nairobi, business systems Nairobi, CRM Kenya, dashboards, automation, travel agency system, visa agency CRM" />
  <meta name="author" content="NairobiPixel - Abdi Hashi" />
  <meta name="robots" content="index, follow" />

  <meta property="og:image" content="https://YOUR_LIVE_DOMAIN/images/og-image-nairobipixel.png">
  <meta property="og:title" content="NairobiPixel | Business Systems &amp; Growth for Service Businesses" />
  <meta property="og:description" content="NairobiPixel builds customer acquisition and management systems for service businesses: websites, dashboards, automation, and marketing‚Äîworking together as one system." />
  <meta property="og:url" content="https://YOUR_LIVE_DOMAIN/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="NairobiPixel" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="NairobiPixel | Business Systems &amp; Growth for Service Businesses" />
  <meta name="twitter:description" content="NairobiPixel builds customer acquisition and management systems for service businesses: websites, dashboards, automation, and marketing‚Äîworking together as one system." />
  <meta name="twitter:image" content="https://YOUR_LIVE_DOMAIN/images/twitter-card-nairobipixel.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="./images/apple-touch-icon.png">
  <link rel="manifest" href="./site.webmanifest">
  <meta name="theme-color" content="#0B0B0B" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#f5efe1" media="(prefers-color-scheme: light)">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">

  <style>
    /* --- CSS Resets and Global Variables --- */
    :root {
      --color-primary-gold: #D4AF37;
      --color-dark-bg: #0B0B0B;
      --color-dark-card: #121212;
      --color-dark-text: #EAEAEA;
      --color-dark-text-muted: #A0A0A0;
      --color-dark-border: rgba(255, 255, 255, 0.1);

      --color-light-bg: #f5efe1;
      --color-light-card: #FFFFFF;
      --color-light-header-bg: #fffaf0;
      --color-light-text: #2c2c2c;
      --color-light-text-muted: #555555;
      --color-light-border: rgba(0, 0, 0, 0.1);

      --font-primary: 'Inter', sans-serif;
      --font-display: 'Playfair Display', serif;

      --transition-speed: 0.4s;
      --transition-ease: cubic-bezier(0.25, 0.8, 0.25, 1);
      --shadow-light: 0 8px 25px rgba(212, 175, 55, 0.1);
      --shadow-dark: 0 10px 30px rgba(0,0,0, 0.3);
    }

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; font-size: 100%; }
    body {
      font-family: var(--font-primary);
      background-color: var(--color-dark-bg);
      color: var(--color-dark-text);
      line-height: 1.7;
      transition: background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease);
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    section { padding: clamp(40px, 7vw, 80px) 20px; overflow: hidden; }

    h1, h2, h3, h4 { font-family: var(--font-display); color: var(--color-primary-gold); transition: color var(--transition-speed) var(--transition-ease); }
    h1 { font-size: clamp(2.5rem, 6vw, 4.2rem); margin-bottom: 1rem; line-height: 1.15; font-weight: 800;}
    h2 { text-align: center; font-size: clamp(2rem, 5vw, 3.2rem); margin-bottom: 2.5rem; font-weight: 700;}
    h3 { font-size: clamp(1.3rem, 3vw, 1.8rem); margin-bottom: 1rem; font-weight: 700;}
    h4 { font-size: clamp(1.1rem, 2.5vw, 1.5rem); margin-bottom: 0.75rem; font-weight: 700;}
    p { margin-bottom: 1rem; color: var(--color-dark-text-muted); font-size: clamp(0.95rem, 2vw, 1.1rem); transition: color var(--transition-speed) var(--transition-ease); }
    .gold { color: var(--color-primary-gold); }
    a { color: var(--color-primary-gold); text-decoration: none; transition: color 0.3s ease; }
    a:hover { color: #eacd6f; }

    *:focus-visible { outline: 3px solid var(--color-primary-gold); outline-offset: 4px; border-radius: 4px; }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

    #siteHeader {
      background: rgba(11, 11, 11, 0.75);
      padding: 1rem 0; position: sticky; top: 0; z-index: 1000;
      backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--color-dark-border);
      transition: background var(--transition-speed) var(--transition-ease), border-bottom-color var(--transition-speed) var(--transition-ease);
    }
    .header-content { display: flex; justify-content: space-between; align-items: center; height: 60px; }
    .logo-link { display: block; }
    .logo-container { position: relative; width: clamp(150px, 20vw, 180px); height: 50px; }
    .logo-container img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: contain; transition: opacity var(--transition-speed) var(--transition-ease); }
    .logo-light { opacity: 1; } .logo-dark { opacity: 0; }

    #navbar { display: flex; gap: clamp(1.25rem, 3vw, 2rem); }
    #navbar a { color: #fff; font-weight: 600; position: relative; padding-bottom: 0.5rem; font-size: clamp(0.9rem, 1.8vw, 1rem); }
    #navbar a::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 0; height: 2px; background-color: var(--color-primary-gold); transition: width 0.3s var(--transition-ease); }
    #navbar a:hover::after, #navbar a.active::after { width: 100%; }
    #navbar a:hover, #navbar a.active { color: var(--color-primary-gold); transform: translateY(-1px); }

    #mobileMenuToggle { display: none; background: none; border: none; color: var(--color-primary-gold); font-size: 1.8rem; cursor: pointer; z-index: 1002; width: 44px; height: 44px; text-align: center; line-height: 44px; }
    #themeToggle { border: none; background: none; font-size: 1.6rem; cursor: pointer; transition: transform 0.3s ease, color var(--transition-speed) var(--transition-ease); margin-left: 1rem; color: #fff; padding: 0.5rem;}
    #themeToggle:hover { transform: scale(1.1) rotate(20deg); }

    .hero {
      background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.8)), url('./images/hero-bg-dark.jpg') center center/cover no-repeat;
      min-height: 70vh; 
      display: flex; align-items: center; justify-content: center; flex-direction: column; text-align: center;
      padding: clamp(30px, 6vw, 50px) 20px; color: #fff; position: relative;
      transition: background-image var(--transition-speed) var(--transition-ease);
    }
    .hero h1 .highlight-word { display: inline-block; animation: subtleTextPopIn 1s var(--transition-ease) forwards; opacity: 0; }
    .hero h1 .highlight-word:nth-child(1) { animation-delay: 0.1s; } .hero h1 .highlight-word:nth-child(2) { animation-delay: 0.3s; }
    .hero h1 .highlight-word:nth-child(3) { animation-delay: 0.5s; }
    @keyframes subtleTextPopIn { 0% { transform: translateY(25px) scale(0.9); opacity: 0; } 100% { transform: translateY(0) scale(1); opacity: 1; } }
    .hero p.subtitle {
      color: #FFFFFF; 
      text-shadow: 1px 1px 3px rgba(0,0,0,0.7); 
      font-size: clamp(1.1rem, 2.5vw, 1.3rem); margin-bottom: 1.8rem; max-width: 700px; animation: fadeInDelayed 1.2s var(--transition-ease) 0.8s forwards; opacity: 0;
    }
    @keyframes fadeInDelayed { to { opacity: 1; } }
    .cta-button {
      display: inline-block; background-color: var(--color-primary-gold); color: var(--color-dark-bg) !important;
      padding: clamp(0.8rem, 2vw, 1.1rem) clamp(1.8rem, 4vw, 2.5rem); font-weight: 700; font-size: clamp(0.95rem, 2vw, 1.1rem);
      border: none; border-radius: 50px; cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
      text-decoration: none; letter-spacing: 0.5px;
    }
    .hero .cta-button { animation: fadeInDelayed 1.2s var(--transition-ease) 1s forwards; opacity: 0; }
    .cta-button:hover { background-color: #c8a634; transform: scale(1.05) translateY(-3px); box-shadow: 0 10px 20px rgba(212, 175, 55, 0.25); }
    .cta-button i { margin-left: 0.75rem; transition: transform 0.3s ease; }
    .cta-button:hover i { transform: translateX(5px); }
    .scroll-down-arrow {
      position: absolute; bottom: 2rem; left: 50%; transform: translateX(-50%);
      font-size: 2.5rem; 
      color: #FFFFFF; 
      opacity: 0.9; 
      text-shadow: 0px 0px 5px rgba(0,0,0,0.8); 
      animation: bounceUpDown 2.5s infinite ease-in-out;
      transition: color var(--transition-speed) var(--transition-ease);
    }
    @keyframes bounceUpDown { 0%, 100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-12px); } }

    .card-grid {
      display: grid;
      gap: clamp(1.2rem, 2.5vw, 2rem);
    }

    .portfolio-grid,
    .services-grid,
    .process-grid,
    .why-choose-us-grid {
      grid-template-columns: repeat(4, 1fr);
    }
    @media screen and (max-width: 1200px) {
      .portfolio-grid,
      .services-grid,
      .process-grid,
      .why-choose-us-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media screen and (max-width: 767px) {
      .portfolio-grid,
      .services-grid,
      .process-grid,
      .why-choose-us-grid {
        grid-template-columns: 1fr;
      }
    }

    .pricing-grid {
      grid-template-columns: repeat(3, 1fr);
    }
    @media screen and (max-width: 992px) {
      .pricing-grid {
        grid-template-columns: 1fr;
      }
    }

    .testimonial-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    @media screen and (max-width: 992px) {
      .testimonial-grid {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--color-dark-card); padding: clamp(1.5rem, 3vw, 2.2rem); border-radius: 12px;
      border: 1px solid var(--color-dark-border);
      transition: transform 0.3s var(--transition-ease), box-shadow 0.3s var(--transition-ease), background-color var(--transition-speed) var(--transition-ease), border-color var(--transition-speed) var(--transition-ease);
    }
    .card:hover { transform: translateY(-10px); box-shadow: var(--shadow-light); border-color: rgba(212, 175, 55, 0.3); }

    .portfolio-item { text-align: center; }
    .portfolio-item img { width: 100%; border-radius: 8px; margin-bottom: 1rem; aspect-ratio: 4/3; object-fit: cover; transition: transform 0.3s ease, filter 0.3s ease; filter: saturate(0.9) brightness(0.95); }
    .portfolio-item:hover img { transform: scale(1.03); filter: saturate(1.1) brightness(1.05); }
    .portfolio-item h3 { 
      margin-top: 1rem; 
      margin-bottom: 0.5rem; 
      color: var(--color-dark-text); 
      font-family: var(--font-primary); 
      font-size: 1.3rem; 
      font-weight: 700;
    }
    .portfolio-item .client-service { font-size: 0.9rem; color: var(--color-primary-gold); display: block; margin-bottom: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
    .view-project-btn {
        display: inline-block; margin-top: 1rem; padding: 0.6rem 1.5rem;
        border: 2px solid var(--color-primary-gold); color: var(--color-primary-gold);
        border-radius: 50px; font-size: 0.9rem; font-weight: 700;
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    .view-project-btn:hover { background-color: var(--color-primary-gold); color: var(--color-dark-bg) !important; }
    .gallery-details { display: none; }

    #founder { background-color: var(--color-dark-card); }
    .founder-content { display: flex; flex-direction: column; align-items: center; text-align: center; max-width: 780px; margin: 0 auto; }
    .founder-content p { font-size: 1.15rem; color: var(--color-dark-text); margin-bottom:1rem; } 
    .founder-content .cta-button { margin-top: 1rem; } 


    .service-item { text-align: center; display: flex; flex-direction: column; align-items: center; height: 100%; }
    .service-item .service-icon { font-size: clamp(2.5rem, 5vw, 3.2rem); margin-bottom: 1rem; color: var(--color-primary-gold) !important; transition: transform 0.3s ease; }
    .service-item:hover .service-icon { transform: scale(1.15) rotate(-7deg); }
    .service-item h3 { color: var(--color-dark-text); }
    .service-item p { font-size: 1rem; margin-bottom: 1rem; flex-grow: 1; } 
    .service-item .expand-btn { margin-top: auto; }

    .process-step { text-align: center; }
    .process-step .process-icon {
      font-size: clamp(2.5rem, 5vw, 3rem); color: var(--color-primary-gold); margin-bottom: 1rem;
      display: inline-flex; align-items: center; justify-content: center; width: 80px; height: 80px;
      border-radius: 50%; background-color: rgba(212, 175, 55, 0.1);
      transition: transform 0.3s ease, background-color 0.3s ease;
    }
    .process-step:hover .process-icon { transform: translateY(-5px) scale(1.1); background-color: rgba(212, 175, 55, 0.2); }
    .process-step h3 { color: var(--color-dark-text); font-size: 1.4rem; margin-bottom: 0.75rem; }

    .currency-toggle-container { text-align: center; margin-bottom: 2rem; }
    .currency-toggle-container label { margin-right: 0.75rem; font-weight: 600; font-size: 1.1rem; }
    #currencyToggle { padding: 0.75rem 1rem; border-radius: 8px; border: 1px solid var(--color-dark-border); background-color: var(--color-dark-card); color: var(--color-dark-text); font-size: 1rem; font-weight: 600; cursor: pointer; transition: border-color 0.3s ease, background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease); }
    #currencyToggle:focus { border-color: var(--color-primary-gold); }
    .pricing-card { text-align: center; display: flex; flex-direction: column; position: relative; overflow: hidden; height: 100%;}
    .pricing-card.recommended { border: 2px solid var(--color-primary-gold); transform: scale(1.02); box-shadow: 0 10px 30px rgba(212, 175, 55, 0.2); }
    .recommended-badge { position: absolute; top: 0; right: 0; background-color: var(--color-primary-gold); color: var(--color-dark-bg); padding: 0.4rem 0.8rem; font-size: 0.8rem; font-weight: bold; border-top-right-radius: 10px; border-bottom-left-radius: 10px; }
    .pricing-card .pricing-icon { font-size: clamp(2rem, 4vw, 2.5rem); color: var(--color-primary-gold); margin-bottom: 1rem; }
    .pricing-card p.price { font-size: clamp(2rem, 5vw, 3rem); margin-bottom: 1rem; font-weight: 700; color: var(--color-dark-text); transition: opacity 0.2s ease-out; }
    .pricing-card ul { list-style: none; padding: 0; margin-bottom: 1rem; color: var(--color-dark-text-muted); text-align: left; font-size: 0.95rem; flex-grow: 1; }
    .pricing-card ul li { margin-bottom: 0.75rem; padding-left: 1.75rem; position: relative; }
    .pricing-card ul li::before { content: "\f00c"; font-family: 'Font Awesome 6 Free'; font-weight: 900; color: var(--color-primary-gold); position: absolute; left: 0; top: 3px; }
    .pricing-card .select-plan-btn { margin-top: auto; }
    
    .pricing-card ul li.feature-toggleable { display: none; }
    .pricing-card ul li.feature-toggleable.feature-visible { display: list-item; }
    .toggle-features-btn {
      display: block; 
      margin: 0.75rem auto 0.75rem; 
      background: none;
      border: 1px solid var(--color-primary-gold);
      color: var(--color-primary-gold);
      padding: 0.5rem 1rem;
      border-radius: 25px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .toggle-features-btn:hover {
      background-color: var(--color-primary-gold);
      color: var(--color-dark-bg) !important;
    }
    body.paige-theme .toggle-features-btn:hover {
      color: var(--color-light-bg) !important;
    }

    .testimonial-card-item { border-left: 5px solid var(--color-primary-gold); }
    .testimonial-quote { font-style: italic; color: var(--color-dark-text); margin-bottom: 1rem; font-size: 1.1rem; position: relative; padding-left: 2.2rem;}
    .testimonial-quote::before { content: "\f10d"; font-family: 'Font Awesome 6 Free'; font-weight: 900; color: var(--color-primary-gold); position: absolute; left: 0; top: -0.25rem; font-size: 1.6rem; opacity: 0.7; }
    .testimonial-client { display: flex; align-items: center; margin-top: 1rem; }
    /* .client-logo class is no longer used for an image, but if .testimonial-client needs specific styling without logo: */
    .testimonial-client .client-name { 
        color: var(--color-primary-gold); 
        font-weight: bold; 
        font-size: 1rem; 
        /* If the span needs to behave like a block or have specific margins without the logo: */
        /* margin-left: 0; /* For example, if logo's margin-right was relied upon */
    }


    #about.why-nairobipixel { background-color: var(--color-dark-card); }
    .why-choose-us-grid .card { text-align: center; }
    .why-choose-us-grid .card .service-icon { font-size: 2.8rem; margin-bottom: 1rem; color: var(--color-primary-gold); }
    .why-choose-us-grid .card h3 { color: var(--color-dark-text); }

    #contact { background: #080808; padding: clamp(3rem, 7vw, 4rem) 1.25rem 2rem; color: var(--color-dark-text); text-align:center; } 
    #contact h2 { font-size: clamp(2rem, 4vw, 2.8rem); margin-bottom: 1.2rem; } 
    #contact p.footer-intro { font-size: 1.15rem; margin-bottom: 1.5rem; max-width: 650px; margin-left: auto; margin-right: auto; }
    .contact-details p { margin: 0.6rem 0; font-size: 1.1rem; }
    .contact-details i { margin-right: 0.5rem; width: 20px; text-align: center; }
    .social-icons { margin: 1.8rem 0 2.2rem; }
    .social-icons a { margin: 0 0.9rem; color: var(--color-primary-gold); font-size: 1.8rem; transition: transform 0.3s ease, color 0.3s ease; }
    .social-icons a:hover { transform: scale(1.25) translateY(-4px); color: #fff; }
    .footer-cta-button { margin-bottom: 2rem; }
    .copyright { font-size:0.9rem; color: var(--color-dark-text-muted); border-top:1px solid var(--color-dark-border); padding-top:1.5rem; margin-top: 2rem; }

    .modal-overlay {
      display: none; position: fixed; inset: 0;
      background-color: rgba(0, 0, 0, 0.88);
      justify-content: center; align-items: center;
      z-index: 10000; opacity: 0; transition: opacity 0.3s ease-in-out; padding: 1rem;
    }
    .modal-overlay.active { display: flex; opacity: 1; }
    .modal-dialog {
      background-color: var(--color-dark-card); padding: clamp(1.5rem, 4vw, 2.5rem); border-radius: 12px;
      width: 100%; max-width: 650px; color: var(--color-dark-text);
      box-shadow: var(--shadow-dark); position: relative;
      transform: scale(0.9) translateY(20px); opacity: 0;
      transition: transform 0.3s var(--transition-ease), opacity 0.3s var(--transition-ease), background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease);
      max-height: 90vh; overflow-y: auto;
    }
    .modal-overlay.active .modal-dialog { transform: scale(1) translateY(0); opacity: 1; }
    .modal-dialog h3 { margin-bottom: 1.5rem; font-size: clamp(1.5rem, 3vw, 2.2rem); }
    .modal-close-button {
      position: absolute; top: 1rem; right: 1rem; background: none; border: none;
      color: var(--color-primary-gold); font-size: 2rem; cursor: pointer;
      transition: transform 0.3s ease, color 0.3s ease; line-height: 1; padding: 0.5rem;
    }
    .modal-close-button:hover { transform: scale(1.15) rotate(90deg); color: #fff; }
    #lightboxDialog { max-width: 90%; }
    .lightbox-project-info { margin-bottom: 1.5rem; }
    .lightbox-project-info h4 { font-size: 1.6rem; color: var(--color-primary-gold); margin-bottom: 0.5rem; }
    .lightbox-project-info p { font-size: 1rem; color: var(--color-dark-text-muted); margin-bottom: 0.75rem; }
    .lightbox-images-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(min(100%, 180px), 1fr)); gap: 1rem; }
    .lightbox-images-grid img { width: 100%; border-radius: 6px; loading: lazy; }
    #serviceModalDialog ul { list-style: none; padding: 0; margin-top: 1rem; }
    #serviceModalDialog ul li { margin-bottom: 0.8rem; color: var(--color-dark-text-muted); padding-left: 1.75rem; position: relative; font-size: 1.05rem; }
    #serviceModalDialog ul li::before { content: "\f00c"; font-family: 'Font Awesome 6 Free'; font-weight: 900; color: var(--color-primary-gold); position: absolute; left: 0; top: 4px; }
    .modal-form .form-group { margin-bottom: 1.25rem; }
    .modal-form label { display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.95rem; }
    .modal-form input[type="text"], .modal-form input[type="email"], .modal-form select, .modal-form textarea {
      width: 100%; padding: 0.8rem 1rem; background: #1f1f1f; border: 1px solid #333;
      color: var(--color-dark-text); border-radius: 8px; font-family: var(--font-primary); font-size: 1rem;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    .modal-form input:focus, .modal-form select:focus, .modal-form textarea:focus { border-color: var(--color-primary-gold); outline: none; box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.25); }
    .form-actions { display: flex; gap: 1rem; flex-wrap: wrap; align-items: center; margin-top: 1.8rem; }
    .form-actions .submit-btn {}
    .form-actions .cancel-btn, .form-actions .whatsapp-link-btn {
      background-color: #333; color: #fff !important;
    }
    .form-actions .cancel-btn:hover { background-color: #444; }
    .form-actions .whatsapp-link-btn { background-color: #25D366; }
    .form-actions .whatsapp-link-btn:hover { background-color: #1EBE57; }
    .form-message { display: none; padding: 1rem; margin-top: 1.25rem; border-radius: 8px; font-weight: 600; text-align: center; }
    .form-message.success { background-color: rgba(37, 211, 102, 0.15); color: #25D366; border: 1px solid rgba(37, 211, 102, 0.3); }
    .form-message.error { background-color: rgba(211, 37, 37, 0.15); color: #D32525; border: 1px solid rgba(211, 37, 37, 0.3); }

    .whatsapp-button {
      position: fixed; bottom: 1.5rem; right: 1.5rem; background: #25D366; color: white;
      font-size: 1.8rem; border-radius: 50%; width: 60px; height: 60px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.3); z-index: 999; text-decoration: none;
      display: flex; align-items: center; justify-content: center;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }
    .whatsapp-button:hover { background-color: #1EBE57; transform: scale(1.12); }

    body.paige-theme {
      background-color: var(--color-light-bg); color: var(--color-light-text);
      --color-dark-border: var(--color-light-border);
    }
    body.paige-theme #siteHeader { background: rgba(255, 250, 240, 0.85); border-bottom-color: var(--color-light-border); }
    body.paige-theme .logo-light { opacity: 0; } body.paige-theme .logo-dark { opacity: 1; }
    body.paige-theme #navbar a { color: var(--color-light-text); }
    body.paige-theme #navbar a:hover, body.paige-theme #navbar a.active { color: var(--color-primary-gold); }
    body.paige-theme #themeToggle, body.paige-theme #mobileMenuToggle { color: var(--color-light-text); }
    body.paige-theme .hero {
      background-image: linear-gradient(rgba(255,255,255,0.4), rgba(255,255,255,0.5)), url('./images/hero-bg-light.jpg');
    }
    body.paige-theme .hero p.subtitle { color: var(--color-light-text); text-shadow: 1px 1px 3px rgba(0,0,0,0.1); }
    body.paige-theme .scroll-down-arrow { color: var(--color-light-text); text-shadow: 1px 1px 3px rgba(255,255,255,0.3); }
    body.paige-theme .card, body.paige-theme .modal-dialog, body.paige-theme #currencyToggle { background: var(--color-light-card); color: var(--color-light-text); border-color: var(--color-light-border); }
    body.paige-theme .card:hover { box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); border-color: rgba(212, 175, 55, 0.2); }
    body.paige-theme .portfolio-item h3, body.paige-theme .service-item h3, body.paige-theme .process-step h3, body.paige-theme .why-choose-us-grid .card h3 { color: var(--color-light-text); }
    body.paige-theme .pricing-card p.price { color: var(--color-light-text); }
    body.paige-theme .pricing-card ul { color: var(--color-light-text-muted); }
    body.paige-theme #founder, body.paige-theme #about.why-nairobipixel, body.paige-theme #process { background-color: var(--color-light-card); }
    body.paige-theme .founder-content p { color: var(--color-light-text-muted); }
    body.paige-theme .testimonial-quote { color: var(--color-light-text); }
    body.paige-theme .modal-form input, body.paige-theme .modal-form select, body.paige-theme .modal-form textarea { background: #EFEFEF; border-color: #D8D8D8; color: var(--color-light-text); }
    body.paige-theme .modal-form input:focus, body.paige-theme .modal-form select:focus, body.paige-theme .modal-form textarea:focus { border-color: var(--color-primary-gold); box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2); }
    body.paige-theme #contact { background: var(--color-light-header-bg); color: var(--color-light-text); }
    body.paige-theme .copyright { border-top-color: var(--color-light-border); color: #777; }
    body.paige-theme .cta-button, body.paige-theme .view-project-btn:hover, body.paige-theme .pricing-card.recommended .select-plan-btn, body.paige-theme .pricing-card:not(.recommended) .select-plan-btn:hover { color: var(--color-light-bg) !important; }
    body.paige-theme .view-project-btn { color: var(--color-primary-gold); }
    body.paige-theme .form-actions .submit-btn { color: var(--color-light-bg) !important; }
    body.paige-theme .form-actions .cancel-btn, body.paige-theme .form-actions .whatsapp-link-btn { color: #fff !important; }


    .animate-pop-in, .animate-slide-in-left, .animate-slide-in-right, .animate-fade-in-up { opacity: 0; transition-property: opacity, transform; transition-duration: 0.7s; transition-timing-function: var(--transition-ease); }
    .animate-pop-in { transform: scale(0.9) translateY(20px); }
    .animate-slide-in-left { transform: translateX(-40px); }
    .animate-slide-in-right { transform: translateX(40px); }
    .animate-fade-in-up { transform: translateY(30px); }
    .in-view.animate-pop-in, .in-view.animate-slide-in-left, .in-view.animate-slide-in-right, .in-view.animate-fade-in-up { opacity: 1; transform: scale(1) translateX(0) translateY(0); }

    @media screen and (max-width: 992px) { 
        #navbar { gap: 1.5rem; } 
    }


    @media screen and (max-width: 768px) { 
      #mobileMenuToggle { display: block; }
      #navbar {
        font-size: 1rem; padding: 2rem 1rem; display: none; flex-direction: column;
        position: fixed; inset: 0; background: var(--color-dark-bg);
        align-items: center; justify-content: center; gap: 2rem;
        transform: translateX(100%);
        transition: transform 0.4s var(--transition-ease), background-color var(--transition-speed) var(--transition-ease);
        will-change: transform;
      }
      #navbar.active { display: flex; transform: translateX(0); }
      #navbar a { font-size: 1.5rem; opacity: 0; transform: translateY(15px); transition: opacity 0.3s ease 0.1s, transform 0.3s ease 0.1s; }
      #navbar.active a { opacity: 1; transform: translateY(0); }
      #navbar.active a:nth-child(1) { transition-delay: 0.15s; } #navbar.active a:nth-child(2) { transition-delay: 0.2s; }
      #navbar.active a:nth-child(3) { transition-delay: 0.25s; } #navbar.active a:nth-child(4) { transition-delay: 0.3s; }
      #navbar.active a:nth-child(5) { transition-delay: 0.35s; } #navbar.active a:nth-child(6) { transition-delay: 0.4s; }
      body.paige-theme #navbar { background: var(--color-light-bg); }
      #themeToggle { position: fixed; top: 1rem; right: calc(1rem + 44px + 0.5rem); z-index: 1003; }
      .hero { background-attachment: scroll; min-height: 65vh; }
    }

    @media screen and (max-width: 480px) { 
      section { padding: clamp(30px, 6vw, 50px) 1rem; } 
      h1 { font-size: clamp(2rem, 8vw, 2.5rem); }
      h2 { font-size: clamp(1.6rem, 6vw, 2rem); margin-bottom: 2rem; } 
      .pricing-card p.price { font-size: clamp(1.8rem, 6vw, 2.2rem); }
      .form-actions { flex-direction: column; align-items: stretch; }
      .form-actions .cta-button, .form-actions .whatsapp-link-btn, .form-actions .cancel-btn { width: 100%; }
      .modal-dialog { padding: 1.5rem; }
      .modal-dialog h3 { font-size: clamp(1.3rem, 5vw, 1.8rem); }
    }
  </style>
</head>
<body>
  <header id="siteHeader">
    <div class="container header-content">
      <a href="#hero" class="logo-link" aria-label="NairobiPixel Home">
        <div class="logo-container">
          <img src="./images/logo-light.png" class="logo-light" alt="NairobiPixel Logo - For Dark Theme">
          <img src="./images/logo-dark.png" class="logo-dark" alt="NairobiPixel Logo - For Light Theme">
        </div>
      </a>
      <nav id="navbar" aria-label="Main navigation">
        <a href="#work" class="nav-link">Our Work</a>
        <a href="#services" class="nav-link">Services</a>
        <a href="#process" class="nav-link">Process</a>
        <a href="#pricing" class="nav-link">Pricing</a>
        <a href="#founder" class="nav-link">Founder</a>
        <a href="#contact" class="nav-link">Contact</a>
      </nav>
      <div style="display: flex; align-items: center;">
        <button id="themeToggle" title="Toggle Theme" aria-live="polite">üåì</button>
        <button id="mobileMenuToggle" class="mobile-toggle" aria-label="Open navigation menu" aria-expanded="false" aria-controls="navbar">
          <i class="fas fa-bars" aria-hidden="true"></i>
          <span class="sr-only">Open Menu</span>
        </button>
      </div>
    </div>
  </header>

  <section class="hero" id="hero">
    <div class="container">
      <h1>
        <span class="highlight-word">We</span> <span class="highlight-word">build</span> <span class="highlight-word gold">systems</span><br>that help service businesses get more customers ‚Äî and manage them effortlessly.
      </h1>
      <p class="subtitle">Websites, automation, dashboards, and marketing ‚Äî combined into one clear business system.</p>
      <a href="#contact" class="cta-button">Book a Free Demo <i class="fas fa-arrow-right"></i></a>
    </div>
    <a href="#work" class="scroll-down-arrow" aria-label="Scroll to Our Work"><i class="fas fa-chevron-down"></i></a>
  </section>

  <section id="work">
    <div class="container">
      <h2 class="gold animate-pop-in">Our Masterpieces</h2>
      <p style="text-align:center; max-width: 700px; margin: -1.5rem auto 2.5rem; color: var(--color-dark-text-muted);" class="animate-fade-in-up" data-delay="100">
        We partner with diverse Nairobi businesses to create stunning digital experiences that drive results. Explore our portfolio.
      </p>
      <div class="card-grid portfolio-grid">
        <div class="card portfolio-item animate-pop-in" data-delay="200">
          <img src="./images/portfolio-kenyos.jpg" alt="Kenyos Interiors Project Showcase" loading="lazy">
          <h3>KENYOS INTERIORS</h3>
          <span class="client-service">Interior Design - Branding &amp; Web</span>
          <div class="gallery-details">
            <h4>Project: Kenyos Interiors Rebrand &amp; Digital Launch</h4>
            <p><strong>Challenge:</strong> Establish a premium online presence for a new interior design firm in Nairobi.</p>
            <p><strong>Solution:</strong> Developed a sophisticated brand identity, a portfolio website showcasing their stunning designs, and an initial social media strategy.</p>
            <p><strong>Result:</strong> Secured 4 new client projects within the first month of website launch, significantly boosting brand visibility.</p>
            <div class="gallery-images">
              <img src="./images/gallery-kenyos-01.jpg" alt="Kenyos Interiors - Moodboard" loading="lazy">
              <img src="./images/gallery-kenyos-02.jpg" alt="Kenyos Interiors - Living Room Design" loading="lazy">
              <img src="./images/gallery-kenyos-03.jpg" alt="Kenyos Interiors - Living Room Design" loading="lazy">
              <img src="./images/gallery-kenyos-04.jpg" alt="Kenyos Interiors - Living Room Design" loading="lazy">
              <img src="./images/gallery-kenyos-05.jpg" alt="Kenyos Interiors - Living Room Design" loading="lazy">
              <img src="./images/gallery-kenyos-06.jpg" alt="Kenyos Interiors - Living Room Design" loading="lazy">
              <img src="./images/gallery-kenyos-07.jpg" alt="Kenyos Interiors - Living Room Design" loading="lazy">
              <img src="./images/gallery-kenyos-08.jpg" alt="Kenyos Interiors - Living Room Design" loading="lazy">
              </div>
          </div>
          <a href="#" class="view-project-btn" onclick="event.preventDefault(); openLightboxModal(this.closest('.portfolio-item'))" aria-label="View Kenyos Interiors Project Details">View Project</a>
        </div>
        <div class="card portfolio-item animate-pop-in" data-delay="300">
          <img src="./images/portfolio-beirut.jpg" alt="Beirut Restaurant Digital Marketing" loading="lazy">
          <h3>BEIRUT RESTAURANT</h3>
          <span class="client-service">Restaurant - Social Media &amp; Ads</span>
           <div class="gallery-details">
            <h4>Project: Beirut Restaurant Social Media Amplification</h4>
            <p><strong>Challenge:</strong> Increase online engagement and foot traffic for a popular Nairobi restaurant.</p>
            <p><strong>Solution:</strong> Implemented a dynamic content strategy, targeted social media advertising campaigns, and influencer collaborations.</p>
            <p><strong>Result:</strong> Achieved a 150% increase in Instagram engagement and a noticeable rise in online reservations and direct inquiries.</p>
            <div class="gallery-images">
                <img src="./images/gallery-beirut-01.jpg" alt="Beirut Restaurant - Food Photography" loading="lazy">
                <img src="./images/gallery-beirut-02.jpg" alt="Beirut Restaurant - Food Photography" loading="lazy">
                <img src="./images/gallery-beirut-03.jpg" alt="Beirut Restaurant - Food Photography" loading="lazy">
                <img src="./images/gallery-beirut-04.jpg" alt="Beirut Restaurant - Food Photography" loading="lazy">
                <img src="./images/gallery-beirut-05.jpg" alt="Beirut Restaurant - Food Photography" loading="lazy">
                <img src="./images/gallery-beirut-06.jpg" alt="Beirut Restaurant - Food Photography" loading="lazy">
                </div>
          </div>
          <a href="#" class="view-project-btn" onclick="event.preventDefault(); openLightboxModal(this.closest('.portfolio-item'))" aria-label="View Beirut Restaurant Project Details">View Project</a>
        </div>
        <div class="card portfolio-item animate-pop-in" data-delay="400">
          <img src="./images/portfolio-urbanflame.jpg" alt="Urban Flame Grill Branding" loading="lazy">
          <h3>URBAN FLAME GRILL</h3>
          <span class="client-service">Fast Food - Branding &amp; Web</span>
          <div class="gallery-details">
            <h4>Project: Urban Flame Grill Brand Refresh &amp; Online Ordering</h4>
            <p><strong>Challenge:</strong> Modernize the brand image and introduce an online ordering system for a popular grill.</p>
            <p><strong>Solution:</strong> Executed a complete branding overhaul with a new logo and visual identity, and developed a user-friendly website with integrated online ordering.</p>
            <p><strong>Result:</strong> Enhanced brand perception leading to increased customer loyalty and a 30% uptake in online orders within two months.</p>
             <div class="gallery-images">
                <img src="./images/gallery-urbanflame-01.jpg" alt="Urban Flame - New Logo" loading="lazy">
                <img src="./images/gallery-urbanflame-02.jpg" alt="Urban Flame - New Logo" loading="lazy">
                <img src="./images/gallery-urbanflame-03.jpg" alt="Urban Flame - New Logo" loading="lazy">
                <img src="./images/gallery-urbanflame-04.jpg" alt="Urban Flame - New Logo" loading="lazy">
                <img src="./images/gallery-urbanflame-05.jpg" alt="Urban Flame - New Logo" loading="lazy">
                <img src="./images/gallery-urbanflame-06.jpg" alt="Urban Flame - New Logo" loading="lazy">
                 </div>
          </div>
          <a href="#" class="view-project-btn" onclick="event.preventDefault(); openLightboxModal(this.closest('.portfolio-item'))" aria-label="View Urban Flame Project Details">View Project</a>
        </div>
         <div class="card portfolio-item animate-pop-in" data-delay="500">
          <img src="./images/portfolio-laas.jpg" alt="Laas Coffee Branding" loading="lazy">
          <h3>LAAS COFFEE</h3>
          <span class="client-service">Cafe - Branding &amp; Social Launch</span>
          <div class="gallery-details">
            <h4>Project: Laas Coffee Brand Launch &amp; Social Media Kickstart</h4>
            <p><strong>Challenge:</strong> Launch a new coffee brand in Nairobi with a strong, appealing identity and immediate social media buzz.</p>
            <p><strong>Solution:</strong> Crafted a unique brand story and visual identity, designed minimalist packaging, and executed a targeted pre-launch and launch social media campaign.</p>
            <p><strong>Result:</strong> Successful brand launch with high engagement, attracting a significant following and early customer base. Featured in local lifestyle blogs.</p>
            <div class="gallery-images">
                <img src="./images/gallery-laas-01.jpg" alt="Laas Coffee - Logo and Packaging" loading="lazy">
                <img src="./images/gallery-laas-02.jpg" alt="Laas Coffee - Logo and Packaging" loading="lazy">
                <img src="./images/gallery-laas-03.jpg" alt="Laas Coffee - Logo and Packaging" loading="lazy">
                <img src="./images/gallery-laas-04.jpg" alt="Laas Coffee - Logo and Packaging" loading="lazy">
                <img src="./images/gallery-laas-05.jpg" alt="Laas Coffee - Logo and Packaging" loading="lazy">
                <img src="./images/gallery-laas-06.jpg" alt="Laas Coffee - Logo and Packaging" loading="lazy">
                <img src="./images/gallery-laas-07.jpg" alt="Laas Coffee - Logo and Packaging" loading="lazy">
                 </div>
          </div>
          <a href="#" class="view-project-btn" onclick="event.preventDefault(); openLightboxModal(this.closest('.portfolio-item'))" aria-label="View Laas Coffee Project Details">View Project</a>
        </div>
      </div>
    </div>
  </section>

  <section id="founder" class="animate-fade-in-up">
    <div class="container">
      <div class="founder-content">
        <h2 class="gold" style="margin-bottom: 1.5rem;">Meet Abdi Hashi</h2>
        <p>Hi, I'm Abdi Hashi, the founder and creative lead at <strong>NairobiPixel</strong>. I help service businesses build systems that attract and manage customers‚Äîconversion-focused websites, automation, and dashboards that keep work moving.</p>
        <p>Because I live and work in Nairobi, I understand how local customers search, buy, and follow up. We'll collaborate closely to map your process, then deliver a system your team can run confidently.</p>
        <a href="#contact" class="cta-button">Let's Create Together <i class="fas fa-pen-nib"></i></a>
      </div>
    </div>
  </section>

  <section id="services">
    <div class="container">
      <h2 class="gold animate-pop-in">Our Digital Toolkit</h2>
      <p style="text-align:center; max-width: 700px; margin: -1.5rem auto 2.5rem; color: var(--color-dark-text-muted);" class="animate-fade-in-up" data-delay="100">
        Comprehensive solutions tailored to amplify your brand's voice, engage your audience, and drive sustainable growth.
      </p>
      <div class="card-grid services-grid">
        <div class="card service-item animate-pop-in" data-delay="200">
          <i class="fas fa-bullhorn service-icon" aria-hidden="true"></i>
          <h3>Business Management Systems</h3>
          <p>Custom dashboards to manage customers, bookings, staff, and invoices ‚Äî all in one place.</p>
          <button class="view-project-btn expand-btn" onclick="openServiceModal('Strategic Social Media')" aria-label="Learn more about Social Media Management">Learn More</button>
        </div>
        <div class="card service-item animate-pop-in" data-delay="300">
          <i class="fas fa-laptop-code service-icon" aria-hidden="true"></i>
          <h3>High-Converting Websites</h3>
          <p>Websites designed to turn visitors into leads and feed them into your system.</p>
          <button class="view-project-btn expand-btn" onclick="openServiceModal('Impactful Web Design')" aria-label="Learn more about Website Development">Learn More</button>
        </div>
        <div class="card service-item animate-pop-in" data-delay="400">
          <i class="fas fa-search-dollar service-icon" aria-hidden="true"></i>
          <h3>Growth &amp; Automation</h3>
          <p>Funnels, ads, and follow-ups that bring customers into your system ‚Äî not into chaos.</p>
          <button class="view-project-btn expand-btn" onclick="openServiceModal('Targeted Paid Advertising')" aria-label="Learn more about Paid Advertising">Learn More</button>
        </div>
        <div class="card service-item animate-pop-in" data-delay="500">
          <i class="fas fa-palette service-icon" aria-hidden="true"></i>
          <h3>Branding &amp; Content</h3>
          <p>A clear identity and content that strengthens trust and improves conversion.</p>
          <button class="view-project-btn expand-btn" onclick="openServiceModal('Memorable Branding')" aria-label="Learn more about Branding">Learn More</button>
        </div>
      </div>
    </div>
  </section>

  <section id="process" style="background-color: var(--color-dark-card);">
    <div class="container">
        <h2 class="gold animate-pop-in">Our Path to Your Success</h2>
        <p style="text-align:center; max-width: 700px; margin: -1.5rem auto 2.5rem; color: var(--color-dark-text-muted);" class="animate-fade-in-up" data-delay="100">
            A transparent, collaborative, and results-driven approach ensures your project's success from concept to launch and beyond.
        </p>
        <div class="card-grid process-grid">
            <div class="process-step card animate-pop-in" data-delay="200">
                <div class="process-icon"><i class="fas fa-microscope" aria-hidden="true"></i></div>
                <h3>1. Discover &amp; Strategize</h3>
                <p>We dive deep into your brand, audience, and objectives. Through collaborative workshops, we define clear goals and craft a bespoke strategy for maximum impact.</p>
            </div>
            <div class="process-step card animate-pop-in" data-delay="300">
                <div class="process-icon"><i class="fas fa-drafting-compass" aria-hidden="true"></i></div>
                <h3>2. Design &amp; Create</h3>
                <p>Our creative team translates strategy into stunning visuals and compelling content. We focus on user-centric design and messaging that resonates and converts.</p>
            </div>
            <div class="process-step card animate-pop-in" data-delay="400">
                <div class="process-icon"><i class="fas fa-rocket" aria-hidden="true"></i></div>
                <h3>3. Develop &amp; Launch</h3>
                <p>With meticulous attention to detail, we build, test, and deploy your project. We ensure a seamless launch experience across all platforms and devices.</p>
            </div>
            <div class="process-step card animate-pop-in" data-delay="500">
                <div class="process-icon"><i class="fas fa-infinity" aria-hidden="true"></i></div>
                <h3>4. Optimize &amp; Grow</h3>
                <p>Post-launch, we analyze performance, gather insights, and continuously optimize. We're your long-term partners in digital growth and adaptation.</p>
            </div>
        </div>
    </div>
  </section>

  <section id="pricing">
    <div class="container">
      <h2 class="gold animate-pop-in">Tailored Growth Packages</h2>
       <p style="text-align:center; max-width: 700px; margin: -1.5rem auto 2rem; color: var(--color-dark-text-muted);" class="animate-fade-in-up" data-delay="100">
        Transparent packages to launch and scale your acquisition and management system. Let's find the right fit for your Nairobi business.
      </p>
      <div class="currency-toggle-container animate-fade-in-up" data-delay="150">
        <label for="currencyToggle">Currency:</label>
        <select id="currencyToggle" onchange="toggleCurrency()" aria-label="Select currency for pricing display">
          <option value="KES" selected>KES (Ksh)</option>
          <option value="USD">USD ($)</option>
        </select>
      </div>
      <div class="card-grid pricing-grid">
        <div class="card pricing-card animate-pop-in" data-delay="200">
          <i class="fas fa-rocket pricing-icon" aria-hidden="true"></i>
          <h3>Starter Launch</h3>
          <p class="price" data-usd="149">Ksh 19370</p>
          <ul>
            <li>1-Page Business Website or Landing Page</li>
            <li>Logo + Brand Color Palette</li>
            <li>Google Business Profile Setup</li>
            <li>3 Custom Social Media Graphics</li>
            <li>Basic Social Media Strategy Guide</li>
            <li>WhatsApp &amp; Instagram Link Integration</li>
          </ul>
          <button class="cta-button select-plan-btn" onclick="openPricingModal('Starter Launch', '149 USD')" aria-label="Select Starter Launch plan">Select Starter</button>
        </div>
        <div class="card pricing-card recommended animate-pop-in" data-delay="300">
          <div class="recommended-badge">Most Popular</div>
          <i class="fas fa-chart-line pricing-icon" aria-hidden="true"></i>
          <h3>Growth Booster</h3>
          <p class="price" data-usd="299">Ksh 38870</p>
          <ul>
            <li>3-5 Page Static Website</li>
            <li>Full Branding Kit (Logo, Colors, Fonts, Basic Guide)</li>
            <li>Social Media Content Calendar (2 Weeks)</li>
            <li>8 Custom Social Media Posts (Image/Text)</li>
            <li>Targeted Ad Campaign Setup (FB/IG - Ad spend separate)</li>
            <li>On-Page SEO Basics &amp; Google Analytics Setup</li>
            <li>Contact Form &amp; WhatsApp Chat Integration</li>
            <li>1 Strategy &amp; Review Call</li>
          </ul>
          <button class="cta-button select-plan-btn" onclick="openPricingModal('Growth Booster', '299 USD')" aria-label="Select Growth Booster plan">Select Growth</button>
        </div>
        <div class="card pricing-card animate-pop-in" data-delay="400">
          <i class="fas fa-crown pricing-icon" aria-hidden="true"></i>
          <h3>Business Max Pro</h3>
          <p class="price" data-usd="499">Ksh 64870</p>
          <ul>
            <li>Up to 7 Page Website / Basic Shopify Setup</li>
            <li>Advanced Branding Suite + Mockups</li>
            <li>Full Social Media Strategy &amp; Management (1 Month)</li>
            <li>15+ Custom Posts (Reels, Carousels, Stories, Images)</li>
            <li>Multiple Ad Campaign Management &amp; Optimization</li>
            <li>Advanced E-commerce, Booking, or Portfolio Integration</li>
            <li>Comprehensive SEO (On-page, Technical Basics)</li>
            <li>Email Marketing Setup (Basic Automation)</li>
            <li>Bi-Weekly Strategy Calls + Priority Support</li>
          </ul>
          <button class="cta-button select-plan-btn" onclick="openPricingModal('Business Max Pro', '499 USD')" aria-label="Select Business Max Pro plan">Select Max Pro</button>
        </div>
      </div>

      <div style="margin-top: 3.5rem;" class="animate-fade-in-up" data-delay="500"> 
        <h2 class="gold" style="margin-bottom: 2rem;">Don't Just Take Our Word For It</h2> 
        <div class="card-grid testimonial-grid">
          <div class="testimonial-card-item card">
            <p class="testimonial-quote">‚ÄúNairobiPixel helped us launch our coffee brand online with incredible results. The branding was spot-on, and customers started engaging immediately. Highly recommend Abdi!‚Äù</p>
            <div class="testimonial-client">
              <span class="client-name">‚Äî Zubair, Laas Coffee</span>
            </div>
          </div>
          <div class="testimonial-card-item card">
            <p class="testimonial-quote">‚ÄúThe website, branding, and IG strategy worked perfectly. We made sales within the first week of going live. Abdi understands the Nairobi market.‚Äù</p>
            <div class="testimonial-client">
              <span class="client-name">‚Äî Saida, Urban Flame</span>
            </div>
          </div>
           <div class="testimonial-card-item card">
            <p class="testimonial-quote">‚ÄúWorking with NairobiPixel completely transformed how customers discover our food. Our Instagram is now a magnet for new diners!‚Äù</p>
            <div class="testimonial-client">
              <span class="client-name">‚Äî Beirut Restaurant Management</span>
            </div>
          </div>
           <div class="testimonial-card-item card">
            <p class="testimonial-quote">‚ÄúFrom no website to a portfolio that closed 4 jobs in the first month. NairobiPixel is serious branding and delivers results.‚Äù</p>
            <div class="testimonial-client">
              <span class="client-name">‚Äî Kenyos Interiors</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="about" class="why-nairobipixel animate-fade-in-up">
    <div class="container">
      <h2 class="gold">Why <span style="font-family: var(--font-display); color: var(--color-primary-gold);">NairobiPixel</span>?</h2>
      <p style="text-align: center; max-width: 750px; margin: -1.5rem auto 2.5rem; font-size: 1.15rem;" class="animate-fade-in-up" data-delay="100">
        We don‚Äôt just build websites or run campaigns ‚Äî we systemize growth. We map how your business works, then align every digital piece to it. Our approach is rooted in:
      </p>
      <div class="card-grid why-choose-us-grid">
          <div class="card animate-pop-in" data-delay="200">
              <i class="fas fa-map-marker-alt service-icon" aria-hidden="true"></i>
              <h3>Local Expertise</h3>
              <p>Deep understanding of the Nairobi market dynamics and consumer behavior, ensuring strategies that truly resonate.</p>
          </div>
          <div class="card animate-pop-in" data-delay="300">
              <i class="fas fa-lightbulb service-icon" aria-hidden="true"></i>
              <h3>Creative Innovation</h3>
              <p>Fresh, modern design and content ideas that make your brand stand out from the crowd and capture attention.</p>
          </div>
          <div class="card animate-pop-in" data-delay="400">
              <i class="fas fa-handshake service-icon" aria-hidden="true"></i>
              <h3>Collaborative Partnership</h3>
              <p>We work closely with you every step of the way, ensuring your vision is at the heart of everything we create.</p>
          </div>
           <div class="card animate-pop-in" data-delay="500">
              <i class="fas fa-bullseye service-icon" aria-hidden="true"></i>
              <h3>Results-Driven</h3>
              <p>Our focus is on delivering measurable outcomes that contribute to your business growth and success.</p>
          </div>
      </div>
    </div>
  </section>

  <footer id="contact" class="animate-fade-in-up">
    <div class="container">
      <h2 class="gold">Ready to Elevate Your Brand?</h2>
      <p class="footer-intro">
        Let's discuss how NairobiPixel can help you achieve your digital ambitions. Reach out today for a no-obligation consultation and let's start crafting your success story.
      </p>
      <div class="contact-details">
        <p><i class="fas fa-envelope gold" aria-hidden="true"></i> Email: <a href="mailto:info@nairobipixel.com">info@nairobipixel.com</a></p>
        <p><i class="fab fa-whatsapp gold" aria-hidden="true"></i> Phone/WhatsApp: <a href="https://wa.me/254700370377" target="_blank" rel="noopener noreferrer">+254 700 370377</a></p>
        <p><i class="fab fa-instagram gold" aria-hidden="true"></i> Instagram: <a href="https://Instagram.com/nairobipixel.ke" target="_blank" rel="noopener noreferrer">@nairobipixel.ke</a></p>
      </div>
      <div class="social-icons">
        <a href="https://Instagram.com/nairobipixel.ke" target="_blank" rel="noopener noreferrer" aria-label="NairobiPixel on Instagram" title="NairobiPixel Instagram"><i class="fab fa-instagram"></i></a>
        <a href="mailto:info@nairobipixel.com" aria-label="Email NairobiPixel" title="Email NairobiPixel"><i class="fas fa-envelope"></i></a>
        <a href="https://wa.me/254700370377" target="_blank" rel="noopener noreferrer" aria-label="Chat with NairobiPixel on WhatsApp" title="Chat on WhatsApp"><i class="fab fa-whatsapp"></i></a>
      </div>
      <button class="cta-button footer-cta-button" onclick="openContactModal()" aria-label="Open contact form">Send Us a Message</button>
      <div class="copyright">
        &copy; <span id="currentYear">2025</span> <span class="gold">NairobiPixel</span>. All Rights Reserved. Crafted with <i class="fas fa-heart gold" aria-hidden="true"></i><span class="sr-only">love</span> in Nairobi, Kenya.
      </div>
    </div>
  </footer>

  <a href="https://wa.me/254700370377?text=Hello%20NairobiPixel!%20I'm%20interested%20in%20your%20services." class="whatsapp-button" target="_blank" rel="noopener noreferrer" aria-label="Chat with us on WhatsApp" title="Chat on WhatsApp">
    <i class="fab fa-whatsapp"></i>
  </a>

  <div id="lightboxModal" class="modal-overlay" onclick="closeLightboxModal(event)" role="dialog" aria-modal="true" aria-labelledby="lightboxTitle" aria-hidden="true">
    <div id="lightboxDialog" class="modal-dialog">
      <button class="modal-close-button" onclick="closeLightboxModal(null, true)" aria-label="Close gallery viewer">&times;</button>
      <div class="lightbox-project-info">
          <h3 id="lightboxTitle" class="gold">Project Title</h3>
          <div id="lightboxDescriptionContainer">
            <p id="lightboxChallenge"></p>
            <p id="lightboxSolution"></p>
            <p id="lightboxResult"></p>
          </div>
      </div>
      <div id="lightboxImagesGrid" class="lightbox-images-grid"></div>
    </div>
  </div>

  <div id="serviceModal" class="modal-overlay" onclick="closeServiceModal(event)" role="dialog" aria-modal="true" aria-labelledby="serviceModalTitle" aria-hidden="true">
    <div id="serviceModalDialog" class="modal-dialog">
      <button class="modal-close-button" onclick="closeServiceModal(null, true)" aria-label="Close service details">&times;</button>
      <h3 id="serviceModalTitle" class="gold">Service Title</h3>
      <p id="serviceModalDescription"></p>
      <ul id="serviceModalList"></ul>
    </div>
  </div>

  <div id="pricingModal" class="modal-overlay" onclick="closePricingModal(event)" role="dialog" aria-modal="true" aria-labelledby="pricingModalFormTitle" aria-hidden="true">
    <div class="modal-dialog">
      <button class="modal-close-button" onclick="closePricingModal(null, true)" aria-label="Close pricing inquiry form">&times;</button>
      <h3 id="pricingModalFormTitle" class="gold">Select Package</h3>
      <form id="pricingForm" name="pricing-contact" class="modal-form" data-netlify="true" data-netlify-honeypot="bot-field-pricing">
        <input type="hidden" name="form-name" value="pricing-contact">
        <input type="hidden" name="package" id="selectedPackage">
        <p class="sr-only" hidden><label>Don‚Äôt fill this out: <input name="bot-field-pricing"></label></p>
        <div class="form-group"> <label for="pricingName">Full Name:</label> <input type="text" name="name" id="pricingName" required autocomplete="name"> </div>
        <div class="form-group"> <label for="pricingEmail">Email Address:</label> <input type="email" name="email" id="pricingEmail" required autocomplete="email"> </div>
        <div class="form-group"> <label for="pricingInterest">Primary Service of Interest:</label>
          <select name="interest" id="pricingInterest" required>
            <option value="" disabled selected>Please select a service</option>
            <option value="Web Development">Web Development</option> <option value="Branding">Branding</option>
            <option value="Social Media Management">Social Media Management</option> <option value="Paid Ads">Paid Ads</option>
            <option value="Not Sure / Consultation">Not Sure / Consultation</option>
          </select>
        </div>
        <div class="form-group"> <label for="pricingMessage">Briefly tell us about your project (optional):</label> <textarea name="message" id="pricingMessage" rows="3"></textarea> </div>
        <div class="form-actions">
          <button type="submit" class="cta-button submit-btn">Send Inquiry</button>
          <a href="https://wa.me/254700370377" target="_blank" rel="noopener noreferrer" class="cta-button whatsapp-link-btn" id="pricingWhatsAppLink"><i class="fab fa-whatsapp"></i> Chat on WhatsApp</a>
        </div>
        <div id="pricingFormSuccess" class="form-message success" role="alert">Thank you! Your inquiry has been sent. We'll be in touch shortly.</div>
        <div id="pricingFormError" class="form-message error" role="alert">Oops! Something went wrong. Please try again or contact us directly.</div>
      </form>
    </div>
  </div>

  <div id="contactModal" class="modal-overlay" onclick="closeContactModal(event)" role="dialog" aria-modal="true" aria-labelledby="contactModalFormTitle" aria-hidden="true">
    <div class="modal-dialog">
      <button class="modal-close-button" onclick="closeContactModal(null, true)" aria-label="Close contact form">&times;</button>
      <h3 id="contactModalFormTitle" class="gold">Get in Touch</h3>
      <form id="contactForm" name="general-contact" class="modal-form" data-netlify="true" data-netlify-honeypot="bot-field-contact">
        <input type="hidden" name="form-name" value="general-contact">
        <p class="sr-only" hidden><label>Don‚Äôt fill this out: <input name="bot-field-contact"></label></p>
        <div class="form-group"> <label for="contactNameGeneral">Full Name:</label> <input type="text" id="contactNameGeneral" name="name" required autocomplete="name"> </div>
        <div class="form-group"> <label for="contactEmailGeneral">Email Address:</label> <input type="email" id="contactEmailGeneral" name="email" required autocomplete="email"> </div>
        <div class="form-group"> <label for="contactInterestGeneral">What can we help you with?</label>
          <select id="contactInterestGeneral" name="interest" required>
            <option value="" disabled selected>Select a service or inquiry type</option>
            <option value="Web Development">Web Development</option> <option value="Branding">Branding</option>
            <option value="Social Media Management">Social Media Management</option> <option value="Paid Ads">Paid Ads</option>
            <option value="General Inquiry">General Inquiry</option> <option value="Partnership">Partnership</option>
          </select>
        </div>
        <div class="form-group"> <label for="contactMessageGeneral">Your Message:</label> <textarea id="contactMessageGeneral" name="message" rows="4" required></textarea> </div>
        <div class="form-actions">
          <button type="submit" class="cta-button submit-btn">Send Message</button>
          <a href="https://wa.me/254700370377" target="_blank" rel="noopener noreferrer" class="cta-button whatsapp-link-btn"><i class="fab fa-whatsapp"></i> Chat on WhatsApp</a>
        </div>
         <div id="contactFormSuccess" class="form-message success" role="alert">Thank you! Your message has been sent. We'll get back to you soon.</div>
        <div id="contactFormError" class="form-message error" role="alert">Sorry, there was an error sending your message. Please try again.</div>
      </form>
    </div>
  </div>

<script>
  // --- Utility: Trap Focus in Modals ---
  const trapFocus = (element, previouslyFocusedElementRef) => {
    const focusableEls = Array.from(
      element.querySelectorAll(
        'a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="email"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'
      )
    ).filter(el => el.offsetParent !== null && !el.closest('[hidden], [style*="display:none"], [style*="display: none"]'));

    if (focusableEls.length === 0) return;
    const firstFocusableEl = focusableEls[0];
    const lastFocusableEl = focusableEls[focusableEls.length - 1];
    const KEYCODE_TAB = 9;

    const handleKeyDown = (e) => {
      if (e.key !== 'Tab' && e.keyCode !== KEYCODE_TAB) return;
      if (e.shiftKey) { /* shift + tab */
        if (document.activeElement === firstFocusableEl) {
          lastFocusableEl.focus();
          e.preventDefault();
        }
      } else { /* tab */
        if (document.activeElement === lastFocusableEl) {
          firstFocusableEl.focus();
          e.preventDefault();
        }
      }
    };
    
    element.addEventListener('keydown', handleKeyDown);
    
    if(!element.cleanupTrapFocus) {
        element.cleanupTrapFocus = () => {
            element.removeEventListener('keydown', handleKeyDown);
        };
    }

    requestAnimationFrame(() => {
        firstFocusableEl.focus();
    });
  };

  // --- Mobile Menu ---
  const nav = document.getElementById('navbar');
  const mobileMenuToggle = document.getElementById('mobileMenuToggle');
  const navLinks = nav.querySelectorAll('.nav-link');
  const mobileMenuToggleIcon = mobileMenuToggle.querySelector('i');
  const mobileMenuToggleSrText = mobileMenuToggle.querySelector('.sr-only');

  function toggleMobileMenu() {
    const isActive =  nav.classList.toggle('active');
    mobileMenuToggle.setAttribute('aria-expanded', isActive);
    if (isActive) {
      mobileMenuToggleIcon.classList.remove('fa-bars');
      mobileMenuToggleIcon.classList.add('fa-times');
      mobileMenuToggleSrText.textContent = 'Close Menu';
      document.body.style.overflow = 'hidden';
    } else {
      mobileMenuToggleIcon.classList.remove('fa-times');
      mobileMenuToggleIcon.classList.add('fa-bars');
      mobileMenuToggleSrText.textContent = 'Open Menu';
      document.body.style.overflow = '';
    }
  }
  mobileMenuToggle.addEventListener('click', toggleMobileMenu);
  navLinks.forEach(link => link.addEventListener('click', () => {
    if (nav.classList.contains('active')) toggleMobileMenu();
  }));
  document.addEventListener('keydown', (e) => {
    if (e.key === "Escape" && nav.classList.contains('active')) toggleMobileMenu();
  });


  // --- Theme Toggle ---
  const themeToggle = document.getElementById('themeToggle');
  const body = document.body;
  const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");

  function applyTheme(theme) {
    if (theme === 'paige-theme') {
      body.classList.add('paige-theme');
      themeToggle.innerHTML = '‚òÄÔ∏è';
      themeToggle.setAttribute('aria-label', 'Switch to Dark Theme');
      themeToggle.title = 'Switch to Dark Theme';
    } else {
      body.classList.remove('paige-theme');
      themeToggle.innerHTML = 'üåô';
      themeToggle.setAttribute('aria-label', 'Switch to Light Theme');
      themeToggle.title = 'Switch to Light Theme';
    }
    localStorage.setItem('theme', theme);
  }

  const savedTheme = localStorage.getItem('theme');
  if (savedTheme) {
    applyTheme(savedTheme);
  } else {
    applyTheme(prefersDarkScheme.matches ? 'dark' : 'paige-theme');
  }

  themeToggle.addEventListener('click', () => {
    applyTheme(body.classList.contains('paige-theme') ? 'dark' : 'paige-theme');
  });
  prefersDarkScheme.addEventListener('change', (e) => {
    if (!localStorage.getItem('theme')) {
      applyTheme(e.matches ? 'dark' : 'paige-theme');
    }
  });

  // --- Smooth Scroll & Active Nav Link ---
  document.querySelectorAll('a.nav-link[href^="#"], a.logo-link[href^="#"], a.scroll-down-arrow[href^="#"], .founder-content a.cta-button[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const targetId = this.getAttribute('href');
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        const headerOffset = document.getElementById('siteHeader').offsetHeight;
        const elementPosition = targetElement.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
        window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
      }
    });
  });

  const sections = document.querySelectorAll("section[id]");
  const siteHeaderHeight = document.getElementById('siteHeader')?.offsetHeight || 70;
  function navHighlighter() {
    let scrollY = window.pageYOffset;
    let SOmethingisActive = false;
    sections.forEach(current => {
      const sectionHeight = current.offsetHeight;
      const sectionTop = current.offsetTop - siteHeaderHeight - 50; 
      let sectionId = current.getAttribute("id");
      const navLink = document.querySelector("nav a[href*=" + sectionId + "]");
      if (navLink) {
        if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
          document.querySelectorAll("nav a.active").forEach(activeLink => activeLink.classList.remove("active"));
          navLink.classList.add("active");
          SOmethingisActive = true;
        } else {
          navLink.classList.remove("active");
        }
      }
    });
     if (!SOmethingisActive && window.innerHeight + window.scrollY >= document.body.offsetHeight - 100) { 
        const contactLink = document.querySelector("nav a[href*='contact']");
        if (contactLink) {
            document.querySelectorAll("nav a.active").forEach(activeLink => activeLink.classList.remove("active"));
            contactLink.classList.add("active");
        }
    }
  }
  window.addEventListener("scroll", navHighlighter);
  window.addEventListener("load", navHighlighter);

  // --- Scroll Animations ---
  const animatedElements = document.querySelectorAll('.animate-pop-in, .animate-slide-in-left, .animate-slide-in-right, .animate-fade-in-up');
  const animationObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const delay = parseInt(entry.target.dataset.delay) || 0;
        setTimeout(() => {
          entry.target.classList.add('in-view');
        }, delay);
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1, rootMargin: "0px 0px -30px 0px" });
  animatedElements.forEach(el => animationObserver.observe(el));


  // --- Modal Handling (Generic) ---
  function openModal(modalElement, previouslyFocusedElementRef, focusTrapTarget) {
    if(!modalElement || !focusTrapTarget) return;
    previouslyFocusedElementRef.el = document.activeElement;
    modalElement.setAttribute('aria-hidden', 'false');
    modalElement.classList.add('active');
    document.body.style.overflow = 'hidden';
    focusTrapTarget.scrollTop = 0;
    trapFocus(focusTrapTarget, previouslyFocusedElementRef);
  }

  function closeModal(modalElement, previouslyFocusedElementRef) {
    if(!modalElement) return;
    if(modalElement.cleanupTrapFocus) modalElement.cleanupTrapFocus(); 
    modalElement.setAttribute('aria-hidden', 'true');
    modalElement.classList.remove('active');
    document.body.style.overflow = '';
    if (previouslyFocusedElementRef.el && typeof previouslyFocusedElementRef.el.focus === 'function') {
        previouslyFocusedElementRef.el.focus();
    }
  }


  // --- Lightbox Modal ---
  const lightboxModalElement = document.getElementById('lightboxModal');
  const lightboxDialog = document.getElementById('lightboxDialog');
  const lightboxTitle = document.getElementById('lightboxTitle');
  const lightboxDescriptionContainer = document.getElementById('lightboxDescriptionContainer'); 
  const lightboxImagesGrid = document.getElementById('lightboxImagesGrid');
  let previousActiveElementLightbox = { el: null };

  function openLightboxModal(portfolioItemElement) {
    if (!portfolioItemElement) return;
    const detailsContainer = portfolioItemElement.querySelector('.gallery-details');
    if (!detailsContainer) return;
    const imagesContainer = detailsContainer.querySelector('.gallery-images');

    lightboxTitle.textContent = detailsContainer.querySelector('h4')?.textContent || portfolioItemElement.querySelector('h3')?.textContent || 'Project Details';
    
    const challengeP = detailsContainer.querySelector('p:nth-of-type(1)');
    const solutionP = detailsContainer.querySelector('p:nth-of-type(2)');
    const resultP = detailsContainer.querySelector('p:nth-of-type(3)');
    let descriptionHTML = '';
    if(challengeP) descriptionHTML += challengeP.outerHTML;
    if(solutionP) descriptionHTML += solutionP.outerHTML;
    if(resultP) descriptionHTML += resultP.outerHTML;
    lightboxDescriptionContainer.innerHTML = descriptionHTML;


    lightboxImagesGrid.innerHTML = '';
    if (imagesContainer) {
        imagesContainer.querySelectorAll('img').forEach(img => {
            const clone = img.cloneNode(true);
            lightboxImagesGrid.appendChild(clone);
        });
    }
    openModal(lightboxModalElement, previousActiveElementLightbox, lightboxDialog);
  }
  function closeLightboxModal(event, forceClose = false) {
    if (forceClose || (event && event.target === lightboxModalElement)) {
      closeModal(lightboxModalElement, previousActiveElementLightbox);
    }
  }
  if(lightboxModalElement) { 
    document.addEventListener('keydown', (e) => {
        if (e.key === "Escape" && lightboxModalElement.classList.contains('active')) closeLightboxModal(null, true);
    });
  }


  // --- Service Modal ---
  const serviceModalElement = document.getElementById('serviceModal');
  const serviceModalDialog = document.getElementById('serviceModalDialog');
  const serviceModalTitle = document.getElementById('serviceModalTitle');
  const serviceModalDescription = document.getElementById('serviceModalDescription');
  const serviceModalList = document.getElementById('serviceModalList');
  let previousActiveElementService = { el: null };
  const serviceDetailsContentFull = {
    'Strategic Social Media': {
      title: 'Business Management Systems',
      description: 'Replace WhatsApp and Excel chaos with one dashboard built around how your team actually works.',
      items: [
        'Customer database & profiles',
        'Booking/inquiry tracking',
        'Status tracking (e.g., application stages)',
        'Invoice & payment records',
        'Staff accounts & accountability',
        'Reporting/exports (optional)',
      ],
    },
    'Impactful Web Design': {
      title: 'High-Converting Websites',
      description: 'Conversion-first sites that plug directly into your system.',
      items: [
        'Conversion-focused layout',
        'WhatsApp + forms integrated',
        'Analytics/Pixel setup',
        'SEO foundations',
        'Fast + mobile-first',
      ],
    },
    'Targeted Paid Advertising': {
      title: 'Growth & Automation',
      description: 'Growth systems to capture, nurture, and measure leads.',
      items: [
        'Lead funnels & landing pages',
        'Follow-up automation (do not overpromise; keep wording general)',
        'Retargeting strategy',
        'Performance reporting',
        'Ads management setup (Meta/Google optional)',
      ],
    },
    'Memorable Branding': {
      title: 'Branding & Content',
      description: 'Brand clarity that boosts trust and conversion.',
      items: [
        'Messaging & positioning',
        'Visual identity refresh',
        'Content templates',
        'Brand consistency system',
        'Social content structure',
      ],
    },
  };

  function openServiceModal(serviceName) {
    const details = serviceDetailsContentFull[serviceName];
    if (details) {
        serviceModalTitle.textContent = details.title || serviceName;
        serviceModalDescription.textContent = details.description || '';
        serviceModalList.innerHTML = details.items.map(item => `<li>${item}</li>`).join('');
        openModal(serviceModalElement, previousActiveElementService, serviceModalDialog);
    }
  }
  function closeServiceModal(event, forceClose = false) {
    if (forceClose || (event && event.target === serviceModalElement)) {
      closeModal(serviceModalElement, previousActiveElementService);
    }
  }
   if(serviceModalElement) {
    document.addEventListener('keydown', (e) => {
        if (e.key === "Escape" && serviceModalElement.classList.contains('active')) closeServiceModal(null, true);
    });
  }


  // --- Pricing Modal & Currency Toggle ---
  const pricingModalElement = document.getElementById('pricingModal');
  const pricingModalDialog = pricingModalElement?.querySelector('.modal-dialog'); 
  const pricingModalFormTitle = document.getElementById('pricingModalFormTitle');
  const selectedPackageInput = document.getElementById('selectedPackage');
  const pricingWhatsAppLink = document.getElementById('pricingWhatsAppLink');
  let previousActiveElementPricing = { el: null };
  let exchangeRateKES = 130; 

  async function fetchExchangeRate() {
    try {
      const defaultRate = 130;
      const res = await fetch("https://open.er-api.com/v6/latest/USD").catch(() => null);
      if (!res || !res.ok) {
        console.warn(`Exchange rate API fetch failed or returned non-OK status, using default rate: ${defaultRate}`);
        exchangeRateKES = defaultRate;
        return;
      }
      const data = await res.json();
      exchangeRateKES = data.rates.KES || defaultRate;
    } catch (err) {
      console.error("Exchange rate fetch failed, using default:", err);
      exchangeRateKES = 130;
    }
  }


  function toggleCurrency() {
    const currencyToggleSelect = document.getElementById("currencyToggle");
    if (!currencyToggleSelect) return;
    const selectedCurrency = currencyToggleSelect.value;
    const priceTags = document.querySelectorAll(".price");
    priceTags.forEach(tag => {
      tag.style.opacity = 0.3;
      setTimeout(() => {
        const usd = parseFloat(tag.dataset.usd);
        if (!isNaN(usd)) { 
            if (selectedCurrency === "USD") {
            tag.textContent = `$${usd.toFixed(0)}`;
            } else {
            const kes = Math.round(usd * exchangeRateKES);
            tag.textContent = `Ksh ${kes.toLocaleString()}`;
            }
        }
        tag.style.opacity = 1;
      }, 150);
    });
  }
  if (document.getElementById("currencyToggle")) { 
    fetchExchangeRate().then(() => {
        toggleCurrency(); 
    });
  }


  function openPricingModal(packageName, packagePriceUSD) {
    if(!pricingModalElement || !pricingModalDialog || !pricingModalFormTitle || !selectedPackageInput || !pricingWhatsAppLink) return;
    pricingModalFormTitle.textContent = `Inquire about: ${packageName}`;
    selectedPackageInput.value = `${packageName} (${packagePriceUSD})`;
    const baseWhatsAppURL = "https://wa.me/254700370377?text=";
    const message = `Hi NairobiPixel! I'm interested in the ${packageName} package.`;
    pricingWhatsAppLink.href = baseWhatsAppURL + encodeURIComponent(message);
    openModal(pricingModalElement, previousActiveElementPricing, pricingModalDialog);
  }
  function closePricingModal(event, forceClose = false) {
    if (forceClose || (event && event.target === pricingModalElement)) {
      closeModal(pricingModalElement, previousActiveElementPricing);
      document.getElementById('pricingForm')?.reset();
      const successMsg = document.getElementById('pricingFormSuccess');
      const errorMsg = document.getElementById('pricingFormError');
      if(successMsg) successMsg.style.display = 'none';
      if(errorMsg) errorMsg.style.display = 'none';
    }
  }
  if(pricingModalElement) {
    document.addEventListener('keydown', (e) => {
        if (e.key === "Escape" && pricingModalElement.classList.contains('active')) closePricingModal(null, true);
    });
  }
  
  // --- Pricing Features Toggle ---
  const pricingCards = document.querySelectorAll('.pricing-card');
  const FEATURES_TO_SHOW = 3; 

  pricingCards.forEach(card => {
    const listItems = card.querySelectorAll('ul li');
    if (listItems.length > FEATURES_TO_SHOW) {
      for (let i = FEATURES_TO_SHOW; i < listItems.length; i++) {
        listItems[i].classList.add('feature-toggleable');
      }
      const toggleBtn = document.createElement('button');
      toggleBtn.classList.add('toggle-features-btn');
      toggleBtn.textContent = 'Show all features';
      
      const selectPlanBtn = card.querySelector('.select-plan-btn');
      if (selectPlanBtn) {
        selectPlanBtn.parentNode.insertBefore(toggleBtn, selectPlanBtn);
      } else { 
         card.querySelector('ul').insertAdjacentElement('afterend', toggleBtn);
      }


      toggleBtn.addEventListener('click', function() {
        const featuresToToggle = card.querySelectorAll('.feature-toggleable');
        let allCurrentlyVisible = true; 
        
        if (featuresToToggle.length > 0 && featuresToToggle[0].classList.contains('feature-visible')) {
            allCurrentlyVisible = true; 
        } else {
            allCurrentlyVisible = false; 
        }

        featuresToToggle.forEach(feature => {
          feature.classList.toggle('feature-visible', !allCurrentlyVisible);
        });
        
        this.textContent = allCurrentlyVisible ? 'Show all features' : 'Show fewer features';
      });
    }
  });


  // --- Contact Modal ---
  const contactModalElement = document.getElementById('contactModal');
  const contactModalDialog = contactModalElement?.querySelector('.modal-dialog');
  let previousActiveElementContact = { el: null };

  function openContactModal() {
    if(!contactModalElement || !contactModalDialog) return;
    openModal(contactModalElement, previousActiveElementContact, contactModalDialog);
  }
  function closeContactModal(event, forceClose = false) {
    if (forceClose || (event && event.target === contactModalElement)) {
      closeModal(contactModalElement, previousActiveElementContact);
      document.getElementById('contactForm')?.reset();
      const successMsg = document.getElementById('contactFormSuccess');
      const errorMsg = document.getElementById('contactFormError');
      if(successMsg) successMsg.style.display = 'none';
      if(errorMsg) errorMsg.style.display = 'none';
    }
  }
  if(contactModalElement) {
    document.addEventListener('keydown', (e) => {
        if (e.key === "Escape" && contactModalElement.classList.contains('active')) closeContactModal(null, true);
    });
  }

  // --- Netlify Form Handling (Generic) ---
  const handleFormSubmit = async (form, successMsgEl, errorMsgEl) => {
    if (!form || !successMsgEl || !errorMsgEl) return;
    const formData = new FormData(form);
    successMsgEl.style.display = 'none';
    errorMsgEl.style.display = 'none';
    const submitButton = form.querySelector('button[type="submit"]');
    const originalButtonText = submitButton.innerHTML;
    submitButton.disabled = true;
    submitButton.innerHTML = 'Sending... <i class="fas fa-spinner fa-spin"></i>';

    try {
      const response = await fetch(form.getAttribute("action") || "/", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: new URLSearchParams(formData).toString(),
      });
      if (response.ok) {
        form.reset();
        successMsgEl.style.display = 'block';
      } else {
        const errorText = await response.text();
        throw new Error(`Form submission failed: ${response.status} ${errorText}`);
      }
    } catch (error) {
      console.error("Form submission error:", error);
      errorMsgEl.textContent = `Oops! Something went wrong. Please try again or contact us directly.`;
      errorMsgEl.style.display = 'block';
    } finally {
        submitButton.disabled = false;
        submitButton.innerHTML = originalButtonText;
    }
  };

  const pricingForm = document.getElementById('pricingForm');
  if(pricingForm) {
    pricingForm.addEventListener('submit', (e) => {
      e.preventDefault();
      handleFormSubmit(pricingForm, document.getElementById('pricingFormSuccess'), document.getElementById('pricingFormError'));
    });
  }

  const contactForm = document.getElementById('contactForm');
  if(contactForm) {
    contactForm.addEventListener('submit', (e) => {
      e.preventDefault();
      handleFormSubmit(contactForm, document.getElementById('contactFormSuccess'), document.getElementById('contactFormError'));
    });
  }

  // --- Update Copyright Year ---
  const currentYearEl = document.getElementById('currentYear');
  if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();

</script>
</body>
</html>
